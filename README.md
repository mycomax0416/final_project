# PJT_Final - 영화추천 서비스 구현

## 프로젝트 소개

- Django와 AWS 이용한 웹사이트 제작

## 팀원 정보 및 개발 분담 내역

- 김기은
  - App-account 기능 구현 및 Design
- 심규현
  - App-movie 기능 구현 및 Design
- 이가경
  - API Crawling 및 기타 Design

## 목표 서비스 및 실제 구현 정도

### 로그인/회원가입 페이지

- 구현 목표
  - 기본 로그인/회원가입 기능과 Social Login 3가지(Kakao, Naver, Google)
- 실제 구현
  - 기본 로그인/회원가입 기능과 Kakao 로그인 구현

### 회원 정보 페이지/기능

- 구현 목표
  - 회원정보 수정, 비번 변경, 로그아웃, 회원탈퇴, 프로필 사진 수정 기능
- 실제 구현
  - 프로필 사진을 제외한 나머지 기능 구현

### 유저 목록 페이지

- 구현 목표
  - 유저들의 영향력(댓글 수, 팔로워 수) 등에 따른 계급별 유저 나열 및 추천 유저 표시
- 실제 구현
  - 단순 유저 목록 나열

### 유저 상세 페이지

- 구현 목표
  - 영화별로 작성한 댓글과 평점 표시
  - `좋아요`한 영화 표시
  - 팔로워/팔로잉 정보와 해당 유저들 리스트 보기
- 실제 구현
  - 영화별 댓글, 평점 및 좋아요한 영화 표시
  - 팔로워/팔로잉 숫자 표시

### 영화 리스트 페이지

- 구현 목표
  - 장르별 영화 표시
- 실제 구현
  - 장르 구별 없이 모든 영화 표시

### 영화 추천 알고리즘

- 구현 목표
  - user가 누른 좋아요와 리뷰의 평점을 종합하여 영화 추천
- 실제 구현
  - 신규 유저의 경우 영화 DB 중 랜덤으로 3개의 영화 추천
  - 기존 유저의 경우 가장 최근에 `좋아요` 누른 영화의 장르 중에서 3개의 영화 추천

### 영화 상세 페이지/기능

- 구현 목표
  - 영화 상세 정보 표시, 댓글 작성 및 표시, 좋아요 기능
- 실제 구현
  - 구현 목표 기능 달성
  - 주요 출연진 표시
  - 영화 관련 유튜브 동영상 표시 기능

### 개발일지

- 2019.11.22 ~ 2019.11.25
  - DB 추출
  - 기본 기능 구현

![image](https://user-images.githubusercontent.com/52814897/69780366-6d306c00-11ee-11ea-977a-f47638d3ac88.png)

- 2019.11.26 ~ 2019.11.28
  - 세부 디자인 추가 및 수정
  - 추가 기능 구현

![image](https://user-images.githubusercontent.com/52814897/69780550-efb92b80-11ee-11ea-9fce-9ca3c3df1a67.png)

## ERD

![KKK-Triple-K](https://user-images.githubusercontent.com/52814897/69778411-8c77cb00-11e7-11ea-8d21-180972c77c3c.png)

## 핵심 기능

- 영화 추천 알고리즘
- 관련 유튜브 동영상 표시
- Naver Search

## 배포 서버 URL

### Movie Service

- http://triple-k.prgypar4mi.ap-northeast-2.elasticbeanstalk.com

## 시행 착오

### Github Conflict

- 문제
  - 3명의 팀원이 github merge 과정에서 나타나는 충돌 문제가 자주 발생
- 해결
  - 명확한 역할 분담과 지속적인 소통을 통한 변수명 및 url 주소 일치

### DB Crawling Error 처리

- 문제

  1. 추출하고자 하는 데이터가 null일 경우 에러 발생

     ![KKK-Triple-K](https://trello-attachments.s3.amazonaws.com/5ddb8fe7dbe90818f1abd7af/422x314/5922450ee44acfa2518a11bb9cfd0c36/null.PNG.png)

  2. 5명의 출연진만 뽑을 때, 출연진이 5명 이하일 경우 Index out of range 에러 발생

     ![KKK-Triple-K](https://trello-attachments.s3.amazonaws.com/5ddb8fe7dbe90818f1abd7af/363x89/f8ec6fc32527b8d87d70d92aab636c35/out_of_index_error.PNG.png)

- 해결

  1. 조건문을 통해 데이터의 값이 null일 경우 빈리스트 처리

     ![KKK-Triple-K](https://trello-attachments.s3.amazonaws.com/5ddb8fe7dbe90818f1abd7af/789x81/c8f221ec704648cb25f75cd4694f5500/null_solution.PNG.png)

  2. try / excpet 구문을 통해 index 에러 발생시 for문 종료

     ![KKK-Triple-K](https://trello-attachments.s3.amazonaws.com/5ddb8fe7dbe90818f1abd7af/205x351/e0136a87015a6409021bfe875a0d7441/out_of_solution.PNG.png)

  

### Youtube Key 가리기

- 문제
  - Youtube Secret Key가 코드 내부에 나타나지 않게 처리 필요
- 해결
  - `movies` folder > `static` 폴더 생성 > `movies` 폴더 생성 > `js` 폴더 생성 > `config.js` 파일 생성
  - `const config = { YOUTUBE_API_KEY : 'abcdefg' }`
  - 원래는 `dotenv` 라는 외부 라이브러리르 써야하는데 이는 node.js라는 외부 백엔드 프레임워크를 사용할 때만 가능하다.
  - 그래서 static 파일로 `config.js` 파일을 만들어서 그 안에 API KEY를 선언해고 template에서 `load static`을 이용해서 static 파일을 불러와서 사용해야 한다.

###  배포시 Dumpdata Error

- 문제
  - Loaddata시 기존에 사용하던 `Django 2.2.5`에서는 발생하지 않던 foreign key 문제가 배포시 사용하는 `Django 2.1.1`버전에서 발생
- 해결
  - 하나로 통합하였던 seed data를 분리하고, dumpdata시 `--natural-foreign` 옵션을 추가하여 에러 해결

## 느낀점

- 김기은
  - 우선 당일 프로젝트가 아닌 기간 1주일의 프로젝트를 처음으로 진행하면서 개발자에 한 걸음 더 다가가는 느낌을 받았다. 서버 구축부터 front 템플릿까지 모두 다루고 싶었으나, 그러지 못한 것이 아쉬웠다.
  - Github 협업 프로젝트를 정식으로 진행한 것은 이번이 처음이었고, 팀 인원이 3명이었기 때문에 다른 팀보다 많은 충돌이 있었지만, 덕분에 git bash를 전보다 익숙하게 사용할 수 있었다. 
  - 이번 프로젝트를 통해서 협업에 있어 가장 중요한 것은 명확한 역할 분담과 목표의 필요성을 느꼈다.

- 심규현

  - 처음으로 일주일 정도의 기간을 가지고 중규모 정도의 프로젝트를 진행했다. 우리 조는 2명이 아니라 3명이서 진행해서 처음에는 역할을 더 상세하게 분담하여 다른 조보다 쉽게 진행할 수 있을 것 같았다.
  - 하지만 이번 프로젝트를 통해 처음으로 git을 이용한 협업으로 프로젝트를 진행했는데 처음에 git branch와 merge 하는 과정에서 어려움이 많았다.
  - 특히 같은 파일에서 내가 작성한 코드와 다른 사람이 작성한 코드가 일치하지 않아 merge conflict 상황이 자주 발생하여 이를 해결하는데 어려움이 있었다.
  - 해결하기 위해, github merge 창에서 직접 수정하여 resolve하거나 아니면 한 사람이 먼저 올린 것을 기준으로 다시 받아 프로젝트를 진행했다.
  - 앞으로 개발자로 나아가기 위해 git을 이용한 협업 과정은 반드시 필요하다. 그래서 이번 프로젝트에서 수많은 시행착오를 통해 git을 이용한 협업 과정의 흐름을 알 수 있었고 organization을 생성하여 git을 이용해 협업하는 과정이 처음에는 어려웠지만 하면 할수록 생각보다 편리한 기능이라는 것을 깨달았다. 앞으로 2학기 프로젝트를 진행하면서 협업 프로젝트를 하게 되는데 1학기 최종 프로젝트에서 경험한 내용을 바탕으로 2학기 프로젝트를 진행하는데 큰 도움이 될 것 같다.
  - 또한 개발 처음 시작할 때 프레임워크 선정하는 것부터 어려움이 있었다. 원래는 Django + Vue를 사용하여 개발하고 싶었지만 현재 나의 실력과 개발 및 배포하는 과정에서 상당한 어려움이 있어 주어진 기간 내에 끝내기 어려울 것이라는 판단이 들었다. 그래서 Django + Vanilla JS를 이용해 개발했다.
  - 수업시간에 배운 Django 또는 Vue 각각의 내용을 이번 프로젝트에서 Django와 Vanilla JS의 혼합된 형태로 코드를 작성하려고 할 때 상당한 어려움이 있었다. 특히 Youtube API KEY를 Vue에서 가져오고 사용할 때와 Vanilla JS에서 사용할 때 방법이 달라 이를 찾아서 해결하는데 어려움이 많았다.
  - 결론적으로 이번 프로젝트를 통해 다양한 프레임워크를 혼합하여 개발할 수 있어 표현할 수 있는 범위가 늘어났다는 것을 알게 되었고 또한 협업 프로젝트를 통해 진행하면서 혼자 개발하는 것도 중요할 때가 있지만 협업을 통해 개발하는 것도 아주 중요하다는 것을 깨닫게 되었다.

- 이가경
  - git branch 로 프로젝트를 진행하게 됨으로써 실제 현업에서 협업하는 경험을 얻을 수 있어 새로웠다. Django 내공이 부족해 json파일 혹은 간단한 디자인(템플릿) 작업을 맡았다. 백엔드 작업에 있어 팀원에 도움을 주지 못해 죄송한 마음이 크다. 프로젝트를 통해 기능적인 부분인 백엔드 뿐만 아니라 외적으로 직접 보임에 있어 프론트 부분에 대한 중요성을 느꼈으며, 이 작업이 결코 쉽지 않다는 것도 깨달았다.
  - 마지막 수업을 통해 배포를 경험했는데 지금까지의 코딩과는 다른 영역이었다. 배포에 있어 어려움이 있었지만 그래도 성공적인 웹 페이지 배포를 경험할 수 있었다. 결론적으로 종합적인 웹 개발을 경험했는데 간단한 웹 페이지임에도 불구하고 어려웠으며, 계속 공부해야 함을 느꼈다. 